<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MathGame</title>
<style>
  :root {
    --primary:#00ff44;
    --bg:#111;
    --text:#eee;
    --accent:#0f0;
    --button-bg:#222;
    --button-hover:#333;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    font-family:Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    transition: background 0.3s,color 0.3s;
  }
  .container{
    max-width:600px;
    margin:0 auto;
    padding:20px;
  }
  h1{margin:0 0 10px;}
  button{
    padding:8px 12px;
    font-size:16px;
    margin:4px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    background:var(--button-bg);
    color:var(--text);
    transition:0.2s;
  }
  button:hover{
    background:var(--button-hover);
    transform:scale(1.05);
  }
  #menu, #gameArea, #pauseMenu, #settingsMenu{
    position:absolute;
    top:0; left:0; width:100%; height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    background:rgba(0,0,0,0.85);
    transition:all 0.4s;
    opacity:1;
    z-index:10;
  }
  .hidden{opacity:0;pointer-events:none;}
  input[type=text]{padding:6px;font-size:16px;margin:4px;border-radius:6px;border:1px solid #333;background:#222;color:#eee;}
  #question{font-size:20px;font-weight:600;margin:10px;}
  #result{min-height:24px;margin:6px;font-weight:bold;transition:opacity 0.3s;}
  #leaderboard{margin-top:12px;text-align:left;width:100%;max-width:400px;}
  #hud{position:fixed;top:10px;right:10px;color:var(--accent);font-size:14px;background:rgba(0,0,0,0.3);padding:6px;border-radius:6px;}
  #pauseMenu, #settingsMenu{background:rgba(0,0,0,0.95);}
  #pauseMenu button, #settingsMenu button{width:180px;}
  .small{font-size:12px;padding:4px 6px;margin-top:4px;}
</style>
</head>
<body>
<div class="container">

  <!-- Giriş ekranı -->
  <div id="loginScreen">
    <h1>MathGame</h1>
    <input type="text" id="playerName" placeholder="Kullanıcı adın">
    <div>
      <button id="loginBtn">Giriş Yap</button>
    </div>
  </div>

  <!-- Ana Menü -->
  <div id="menu" class="hidden">
    <h1>MathGame</h1>
    <button id="startBtn">Başla</button>
    <button id="settingsBtn">Ayarlar</button>
    <button id="aboutBtn">Hakkında</button>
    <div id="versionInfo" style="margin-top:10px;font-size:12px;color:#0f0;">v1.2.5</div>
  </div>

  <!-- Ayarlar Menüsü -->
  <div id="settingsMenu" class="hidden">
    <h2>Ayarlar</h2>
    <div>
      <label>Ses: <input type="checkbox" id="soundToggle" checked></label>
    </div>
    <div>
      <label>İşlem Türü:</label><br>
      <label><input type="checkbox" class="opType" value="+"> Toplama</label><br>
      <label><input type="checkbox" class="opType" value="-"> Çıkarma</label><br>
      <label><input type="checkbox" class="opType" value="*"> Çarpma</label><br>
      <label><input type="checkbox" class="opType" value="/"> Bölme</label>
    </div>
    <button id="closeSettingsBtn">Kapat</button>
  </div>

  <!-- Hakkında Menüsü -->
  <div id="aboutMenu" class="hidden">
    <h2>Hakkında</h2>
    <p>Yapımcı: SKYDIVEX</p>
    <p>MathGame v1.2.5</p>
    <ul>
      <li>Seviye sistemi ve artan zorluk</li>
      <li>Puan sistemi: Seviye ×10 puan</li>
      <li>Duraklatma menüsü animasyonlu</li>
      <li>Ayarlarla işlem türü seçimi ve ses kontrolü</li>
    </ul>
    <button id="closeAboutBtn">Kapat</button>
  </div>

  <!-- Oyun Alanı -->
  <div id="gameArea" class="hidden">
    <div id="hud">Seviye: <span id="level">1</span> | Puan: <span id="score">0</span> | Ödül: <span id="reward">10</span></div>
    <p id="question"></p>
    <input type="text" id="answer" placeholder="Cevabın?">
    <button id="submitBtn">Gönder</button>
    <p id="result"></p>
    <h3>Puan Tablosu</h3>
    <div id="leaderboard"></div>
    <button id="pauseBtn" class="small">Duraklat</button>
  </div>

  <!-- Duraklatma Menüsü -->
  <div id="pauseMenu" class="hidden">
    <h2>Duraklatıldı</h2>
    <button id="resumeBtn">Devam Et</button>
    <button id="pauseSettingsBtn">Ayarlar</button>
  </div>

</div>

<script>
let player, score=0, level=1, reward=10, correct;
let leaderboard=JSON.parse(localStorage.getItem('leaderboard'))||{};
let soundOn = localStorage.getItem('sound')!=='false';
const opTypes = ['+','-','*','/'];

const loginScreen = document.getElementById('loginScreen');
const menu = document.getElementById('menu');
const gameArea = document.getElementById('gameArea');
const settingsMenu = document.getElementById('settingsMenu');
const aboutMenu = document.getElementById('aboutMenu');
const pauseMenu = document.getElementById('pauseMenu');

const playerNameInput = document.getElementById('playerName');
const loginBtn = document.getElementById('loginBtn');
const startBtn = document.getElementById('startBtn');
const settingsBtn = document.getElementById('settingsBtn');
const aboutBtn = document.getElementById('aboutBtn');
const closeSettingsBtn = document.getElementById('closeSettingsBtn');
const closeAboutBtn = document.getElementById('closeAboutBtn');
const submitBtn = document.getElementById('submitBtn');
const answerInput = document.getElementById('answer');
const questionEl = document.getElementById('question');
const resultEl = document.getElementById('result');
const leaderboardEl = document.getElementById('leaderboard');
const levelEl = document.getElementById('level');
const scoreEl = document.getElementById('score');
const rewardEl = document.getElementById('reward');
const pauseBtn = document.getElementById('pauseBtn');
const resumeBtn = document.getElementById('resumeBtn');
const pauseSettingsBtn = document.getElementById('pauseSettingsBtn');
const soundToggle = document.getElementById('soundToggle');
const opCheckboxes = document.querySelectorAll('.opType');

soundToggle.checked=soundOn;

loginBtn.onclick = ()=> {
  const name = playerNameInput.value.trim();
  if(!name){alert('Adını gir!'); return;}
  player=name;
  if(!leaderboard[player]) leaderboard[player]=0;
  score=leaderboard[player];
  loginScreen.classList.add('hidden');
  menu.classList.remove('hidden');
};

startBtn.onclick = ()=>{menu.classList.add('hidden'); gameArea.classList.remove('hidden'); newQuestion();}
settingsBtn.onclick = ()=>{settingsMenu.classList.remove('hidden'); menu.classList.add('hidden');}
closeSettingsBtn.onclick = ()=>{settingsMenu.classList.add('hidden'); menu.classList.remove('hidden');}
aboutBtn.onclick = ()=>{aboutMenu.classList.remove('hidden'); menu.classList.add('hidden');}
closeAboutBtn.onclick = ()=>{aboutMenu.classList.add('hidden'); menu.classList.remove('hidden');}

submitBtn.onclick = checkAnswer;
answerInput.addEventListener('keydown',e=>{if(e.key==='Enter') submitBtn.click();});

pauseBtn.onclick = ()=>{pauseMenu.classList.remove('hidden'); gameArea.classList.add('hidden');}
resumeBtn.onclick = ()=>{pauseMenu.classList.add('hidden'); gameArea.classList.remove('hidden');}
pauseSettingsBtn.onclick = ()=>{settingsMenu.classList.remove('hidden'); pauseMenu.classList.add('hidden');}

soundToggle.onchange = ()=>{soundOn=soundToggle.checked; localStorage.setItem('sound',soundOn);}

function randomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
function getRandomOp(){ 
  let types = Array.from(opCheckboxes).filter(c=>c.checked).map(c=>c.value);
  return types.length>0 ? types[randomInt(0,types.length-1)] : opTypes[randomInt(0,opTypes.length-1)];
}
function newQuestion(){
  let max = Math.min(10+level*2,100);
  let op = getRandomOp();
  let a = randomInt(1,max), b=randomInt(1,max);
  if(op==='/' || op==='-'){if(b>a){[a,b]=[b,a];}}
  if(op==='/'){b=Math.max(1,b); a=b*randomInt(1,Math.floor(max/b));}
  correct = eval(a+op+b);
  questionEl.innerText=`Seviye ${level}: ${a} ${op} ${b} = ? (Ödül: ${level*10})`;
  reward=level*10; rewardEl.innerText=reward;
  answerInput.value=''; answerInput.focus();
  resultEl.style.opacity=0;
}

function checkAnswer(){
  let val=parseFloat(answerInput.value);
  if(val===correct){
    score+=reward;
    scoreEl.innerText=score;
    resultEl.innerText='Doğru!';
    resultEl.style.opacity=1;
    level++;
    levelEl.innerText=level;
    newQuestion();
  } else {
    resultEl.innerText='Yanlış!';
    resultEl.style.opacity=1;
  }
  leaderboard[player]=score;
  localStorage.setItem('leaderboard',JSON.stringify(leaderboard));
  updateLeaderboard();
}

function updateLeaderboard(){
  let entries = Object.entries(leaderboard).sort((a,b)=>b[1]-a[1]);
  leaderboardEl.innerHTML='';
  entries.forEach(([p,s])=>{leaderboardEl.innerHTML+=`<p>${p}: ${s}</p>`;});
}

updateLeaderboard();
</script>
</body>
</html>

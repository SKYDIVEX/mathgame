<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Matematik Mini Oyunu</title>
  <style>
    body{font-family:Arial;margin:30px;background:#111;color:#eee}
    .box{max-width:420px;margin:0 auto;padding:20px;border-radius:8px;background:#1a1a1a}
    button{padding:8px 12px;margin-top:10px}
    input{padding:8px;width:100%}
  </style>
</head>
<body>
  <div class="box">
    <h2>Matematik Meydan Okuma</h2>
    <p id="info">Seviye: <span id="lvl">1</span></p>
    <p id="q"></p>
    <input id="ans" autocomplete="off" />
    <div>
      <button id="check">Cevapla</button>
      <button id="skip">Atla</button>
    </div>
    <p id="msg"></p>
  </div>

  <script>
    let level = 1;
    const qEl = document.getElementById('q');
    const lvlEl = document.getElementById('lvl');
    const ans = document.getElementById('ans');
    const msg = document.getElementById('msg');

    function makeQuestion() {
      // seviye arttıkça aralık büyür, rastgele işlemler, kök soruları nadiren
      const max = 3 + level * 2;
      const a = Math.floor(Math.random()*max)+1;
      const b = Math.floor(Math.random()*max)+1;
      const ops = ['+','-','*','/','sqrt'];
      // sqrt nadiren çıkacak
      const op = (Math.random() < Math.min(0.15, level*0.02)) ? 'sqrt' : ops[Math.floor(Math.random()*3)];
      let text, answer;
      if(op === '+'){ text = `${a} + ${b}`; answer = a + b; }
      else if(op === '-'){ text = `${a} - ${b}`; answer = a - b; }
      else if(op === '*'){ text = `${a} × ${b}`; answer = a * b; }
      else { // bölme: tam bölünebilir yap
        const prod = a * b;
        text = `${prod} / ${a}`; answer = b;
      }
      // kök sorusu (sadece pozitif tam karelerle)
      if(op === 'sqrt'){
        const n = (Math.floor(Math.random()* (1 + Math.min(5, level))) + 1);
        const square = n*n;
        text = `√${square}`;
        answer = n;
      }
      qEl.textContent = text + " = ?";
      qEl.dataset.answer = String(answer);
      lvlEl.textContent = level;
      ans.value = '';
      ans.focus();
      msg.textContent = '';
    }

    document.getElementById('check').onclick = ()=>{
      const correct = qEl.dataset.answer;
      if(ans.value.trim() === '') { msg.textContent='Cevap gir.'; return; }
      if(ans.value.trim() === correct){
        msg.textContent = 'Tebrikler! Seviye yükseliyor.';
        level++;
      } else {
        msg.textContent = `Yanlış! Doğru: ${correct}. Seviye 1'e dönüyor.`;
        level = 1;
      }
      setTimeout(makeQuestion, 900);
    };
    document.getElementById('skip').onclick = ()=>{
      msg.textContent = `Atlandı. Doğru: ${qEl.dataset.answer}`;
      level = Math.max(1, level-1);
      setTimeout(makeQuestion,800);
    };

    makeQuestion();
  </script>
</body>
</html>

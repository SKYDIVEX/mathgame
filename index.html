<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MathGame v1.2.5</title>
<style>
/* Temel stil ve tema */
:root{--primary:#00ff44;--bg:#111;--text:#eee;--accent:#0f0}
html,body{margin:0;padding:0;height:100%;font-family:Arial, sans-serif;background:var(--bg);color:var(--text);overflow:hidden}
*{box-sizing:border-box;transition:all 0.25s ease}

.hidden{display:none}

/* Giriş ekranı */
#loginScreen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;background:var(--bg)}
#loginScreen input{padding:10px;font-size:18px;margin:5px;border-radius:6px;border:none;width:200px;text-align:center}
#loginScreen button{padding:10px 20px;margin:5px;background:var(--primary);border:none;color:#000;font-weight:700;border-radius:6px;cursor:pointer;transition:0.2s}
#loginScreen button:hover{transform:scale(1.05);filter:brightness(1.2)}
#loginScreen h1{font-size:36px;margin-bottom:15px}

/* Ana menü */
#mainMenu{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:12px;background:linear-gradient(180deg,#111,#222);transform:translateY(-100%);}
.menu-btn{padding:12px 25px;font-size:18px;font-weight:600;border:none;border-radius:8px;background:var(--primary);color:#000;cursor:pointer;transition:0.25s}
.menu-btn:hover{transform:scale(1.05);filter:brightness(1.3)}
#versionInfo{position:absolute;bottom:12px;font-size:12px;color:#0f0}

/* Oyun alanı */
#gameArea{position:absolute;top:0;left:0;width:100%;height:100%;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:12px}
#topBar{width:100%;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:16px}
#question{font-size:22px;font-weight:700}
#answer{padding:8px;font-size:16px;width:120px;text-align:center;border-radius:6px;border:none}
#submitBtn{padding:8px 16px;font-size:16px;background:var(--primary);border:none;border-radius:6px;cursor:pointer;transition:0.2s}
#submitBtn:hover{transform:scale(1.05);filter:brightness(1.2)}
#scoreDisplay,#levelDisplay,#nextScore{font-weight:700;color:var(--primary)}
#result{min-height:28px;font-weight:700;transition:opacity 0.3s}

/* Puan tablosu */
#leaderboard{margin-top:12px;text-align:left;width:300px;border-top:1px solid #333;padding-top:6px}
#leaderboard i{color:#555}

/* Duraklatma menüsü */
#pauseMenu{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);backdrop-filter:blur(0px);display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:0.4s}
#pauseMenu.show{opacity:1;pointer-events:auto;backdrop-filter:blur(4px)}
#pauseMenu .menuContent{background:#222;padding:20px;border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:10px;transform:translateY(-50px);transition:0.3s}
#pauseMenu.show .menuContent{transform:translateY(0)}

/* Ayarlar */
#settings{display:flex;flex-direction:column;gap:8px;width:220px}
#settings label{display:flex;justify-content:space-between;font-size:14px}
#settings input[type=checkbox]{transform:scale(1.3);margin-left:6px}
#settings input[type=color]{width:40px;height:24px;border:none;padding:0}

/* Hakkında */
#about{font-size:14px;color:#0f0;text-align:center;max-width:320px;margin-top:12px}
#about b{color:#0f0}

/* Animasyonlar ve küçük detaylar */
button:active{transform:scale(0.95)}
</style>
</head>
<body>

<!-- Giriş ekranı -->
<div id="loginScreen">
  <h1>MathGame</h1>
  <input type="text" id="playerName" placeholder="Kullanıcı adın?">
  <button id="loginBtn">Başla</button>
</div>

<!-- Ana Menü -->
<div id="mainMenu">
  <button class="menu-btn" id="startGameBtn">Oyna</button>
  <button class="menu-btn" id="pauseSettingsBtn">Ayarlar</button>
  <button class="menu-btn" id="aboutBtn">Hakkında</button>
  <div id="versionInfo">v1.2.5 • Yapımcı: SKYDIVEX</div>
</div>

<!-- Oyun Alanı -->
<div id="gameArea" class="hidden">
  <div id="topBar">
    <div>Oyuncu: <span id="playerDisplay"></span></div>
    <div>Seviye: <span id="levelDisplay">1</span> (Sonraki: <span id="nextScore">10</span>p)</div>
    <div>Puan: <span id="scoreDisplay">0</span></div>
    <button id="pauseBtn">Duraklat</button>
  </div>

  <div id="questionArea">
    <p id="question">Soru yükleniyor...</p>
    <input type="text" id="answer">
    <button id="submitBtn">Gönder</button>
    <p id="result"></p>
  </div>

  <h3>Puan Tablosu</h3>
  <div id="leaderboard"></div>
</div>

<!-- Duraklatma ve Ayarlar -->
<div id="pauseMenu">
  <div class="menuContent">
    <button id="resumeBtn">Devam</button>
    <div id="settings">
      <label>Sesler Açık/Kapalı <input type="checkbox" id="soundToggle"></label>
      <label>Arka Plan Renk <input type="color" id="bgColorPicker" value="#111111"></label>
      <label>Buton Renk <input type="color" id="btnColorPicker" value="#00ff44"></label>
      <label>Toplama <input type="checkbox" id="opAdd" checked></label>
      <label>Çıkarma <input type="checkbox" id="opSub" checked></label>
      <label>Çarpma <input type="checkbox" id="opMul" checked></label>
      <label>Bölme <input type="checkbox" id="opDiv" checked></label>
    </div>
  </div>
</div>

<!-- Hakkında Detay -->
<div id="about" class="hidden">
  <p><b>MathGame v1.2.5</b></p>
  <p>Yapımcı: SKYDIVEX</p>
  <p>Bu sürümde animasyonlu menüler, ayarlar, modern sesler, seviye artışı ve zorluk sistemi eklendi. Duraklatma menüsü, puan tablosu ve oyun içi ayarlar tamamen güncellendi.</p>
</div>

<script>
// Oyun mantığı
let player = '';
let score = 0;
let level = 1;
let nextScore = 10;
let correct = 0;
let operations = ['+','-','*','/'];
let enabledOps = { '+':true,'-':true,'*':true,'/':true };
let leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || {};
let soundEnabled = true;

// Elements
const loginScreen = document.getElementById('loginScreen');
const mainMenu = document.getElementById('mainMenu');
const gameArea = document.getElementById('gameArea');
const playerDisplay = document.getElementById('playerDisplay');
const scoreDisplay = document.getElementById('scoreDisplay');
const levelDisplay = document.getElementById('levelDisplay');
const nextScoreDisplay = document.getElementById('nextScore');
const questionEl = document.getElementById('question');
const answerInput = document.getElementById('answer');
const resultEl = document.getElementById('result');
const leaderboardEl = document.getElementById('leaderboard');

const pauseMenu = document.getElementById('pauseMenu');
const resumeBtn = document.getElementById('resumeBtn');
const soundToggle = document.getElementById('soundToggle');
const bgColorPicker = document.getElementById('bgColorPicker');
const btnColorPicker = document.getElementById('btnColorPicker');
const opAdd = document.getElementById('opAdd');
const opSub = document.getElementById('opSub');
const opMul = document.getElementById('opMul');
const opDiv = document.getElementById('opDiv');

const aboutDiv = document.getElementById('about');

// Sesler
const clickSound = new Audio('https://www.soundjay.com/button/beep-07.mp3');
clickSound.volume = 0.1;

function playClick(){
  if(soundEnabled) clickSound.currentTime=0,clickSound.play();
}

// Login
document.getElementById('loginBtn').addEventListener('click',()=>{
  player = document.getElementById('playerName').value || 'Oyuncu';
  loginScreen.classList.add('hidden');
  mainMenu.style.transform = 'translateY(0)';
});

// Menü butonları
document.getElementById('startGameBtn').addEventListener('click',()=>{
  playClick();
  mainMenu.style.transform = 'translateY(-100%)';
  setTimeout(()=>{
    mainMenu.classList.add('hidden');
    gameArea.classList.remove('hidden');
    playerDisplay.innerText = player;
    newQuestion();
  },300);
});

document.getElementById('pauseBtn').addEventListener('click',()=>{
  playClick();
  pauseMenu.classList.add('show');
});
resumeBtn.addEventListener('click',()=>{
  playClick();
  pauseMenu.classList.remove('show');
});

document.getElementById('aboutBtn').addEventListener('click',()=>{
  playClick();
  aboutDiv.classList.toggle('hidden');
});

// Ayarlar
soundToggle.addEventListener('change',()=>{soundEnabled = soundToggle.checked;});
bgColorPicker.addEventListener('input',()=>{document.body.style.background = bgColorPicker.value;});
btnColorPicker.addEventListener('input',()=>{document.querySelectorAll('.menu-btn,#submitBtn').forEach(b=>b.style.background = btnColorPicker.value);});
opAdd.addEventListener('change',()=>{enabledOps['+'] = opAdd.checked;});
opSub.addEventListener('change',()=>{enabledOps['-'] = opSub.checked;});
opMul.addEventListener('change',()=>{enabledOps['*'] = opMul.checked;});
opDiv.addEventListener('change',()=>{enabledOps['/'] = opDiv.checked;});

// Oyun Fonksiyonları
function newQuestion(){
  let ops = operations.filter(o=>enabledOps[o]);
  if(ops.length===0) ops = ['+'];
  const op = ops[Math.floor(Math.random()*ops.length)];
  const levelMax = Math.min(level*10, 100);
  let a = Math.floor(Math.random()*levelMax)+1;
  let b = Math.floor(Math.random()*levelMax)+1;
  if(op==='/' && b===0) b=1;
  let qText = `${a} ${op} ${b} = ?`;
  questionEl.innerText = qText;
  answerInput.value = '';
  answerInput.focus();
  questionEl.dataset.answer = Math.floor(eval(`${a}${op}${b}`));
}

document.getElementById('submitBtn').addEventListener('click',checkAnswer);
answerInput.addEventListener('keydown',e=>{if(e.key==='Enter') checkAnswer();});

function checkAnswer(){
  let ans = parseInt(answerInput.value);
  let correctAns = parseInt(questionEl.dataset.answer);
  if(ans===correctAns){
    resultEl.innerText = 'Doğru!';
    score += level*10;
    correct++;
    if(correct>=level){
      level++;
      correct=0;
    }
  }else{
    resultEl.innerText = 'Yanlış!';
  }
  scoreDisplay.innerText = score;
  levelDisplay.innerText = level;
  nextScoreDisplay.innerText = level*10;
  updateLeaderboard();
  newQuestion();
}

function updateLeaderboard(){
  leaderboard[player] = score;
  localStorage.setItem('leaderboard',JSON.stringify(leaderboard));
  let html='';
  Object.entries(leaderboard).sort((a,b)=>b[1]-a[1]).forEach(([p,s],i)=>{
    html += `<i>${i+1}. ${p} : ${s}p</i><br>`;
  });
  leaderboardEl.innerHTML = html;
}

// İlk ayarlar
soundToggle.checked = soundEnabled;
